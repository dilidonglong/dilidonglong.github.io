---
title: iperf测速使用与说明
date: 2021-09-14 22:53:05
categories: linux
tags:
---

## 1.概述

Iperf3 是一个网络性能测试工具。Iperf可以测试最大TCP和UDP带宽性能，具有多种参数和UDP特性，可以根据需要调整，可以报告带宽、延迟抖动和数据包丢失.对于每个测试，它都会报告带宽，丢包和其他参数，可在Windows、Mac OS X、Linux、FreeBSD等各种平台使用，是一个简单又实用的小工具。

软件下载地址： https://iperf.fr/iperf-download.php

<!--more-->

## 2.linux/windows安装

```bash
在CentOS 7上使用下列命令即可安装：
# yum install iperf3
 
在ubuntu 上使用下列命令安装:
# apt-get install iperf3
 
windows端安装：
下载解压安装包，进入dos切换到iperf3解压目录，执行iperf3即可运行.
```

## 3.Iperf3使用

Iperf3也是C/S(客户端/服务器端)架构模式，在使用iperf3测试时，要同时在server端与client端都各执行一个程序，让它们互相传送报文进行测试。

linux作为服务器：

```bash
#开启iperf作为服务器，默认监听5201端口，所以需要防火墙放行该端口
saneri@saneri-VirtualBox:~$ iperf3 -s
```

windows作为客户端：

```bash
#进入到程序解压目录，执行下述命令，其中192.168.1.1是服务器的IP
C:\Users\iperf3>iperf3.exe -c 192.168.1.1
```

缺省参数下，Client将连接Server端的5201端口，持续向Server端**发送数据**，并统计出每秒传输的字节数、带宽、出现报文重传的次数、拥塞窗口（Congestion Window）大小，整个测试将持续10秒钟；最后将汇总10秒的平均数据，并给出发送和接收端的统计。

<br>

iperf3 所提供的选项非常多，以下介绍一些常用的参数。

**服务器**端命令行

其中：

```bash
-s    表示服务器端；
-p    定义端口号；
-i    设置每次报告之间的时间间隔，单位为秒，如果设置为非零值，就会按照此时间间隔输出测试报告，默认值为零
```

**客户端**命令行
		其中：

```bash
-c    表示服务器的IP地址；
-p    表示服务器的端口号；
-t    参数可以指定传输测试的持续时间,Iperf在指定的时间内，重复的发送指定长度的数据包，默认是10秒钟.

-i    设置每次报告之间的时间间隔，单位为秒，如果设置为非零值，就会按照此时间间隔输出测试报告，默认值为零；

-w    设置套接字缓冲区为指定大小，对于TCP方式，此设置为TCP窗口大小，对于UDP方式，此设置为接受UDP数据包的缓冲区大小，限制可以接受数据包的最大值.

-b    测试速率，如100Mbps。写法为-b 100M
-P    设置发起的线程连接数目。如-P 5表示同时发起5个连接测速
-u    测试udp带宽

--logfile    参数可以将输出的测试结果储存至文件中.

-J  来输出JSON格式测试结果.
-R  反向传输,缺省iperf3使用上传模式：Client负责发送数据，Server负责接收；如果需要测试下载速度，则在Client侧使用-R参数即可.
```